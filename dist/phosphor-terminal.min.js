"use strict";var __extends=this.__extends||function(t,e){function r(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);r.prototype=e.prototype,t.prototype=new r},phosphor;!function(t){var e;!function(e){var r=t.widgets.Widget,i=function(t){function e(e,r){var i=this;t.call(this),this.addClass("TermWidget"),this._ws=new WebSocket(e),this._config=r||{useStyle:!0},this._term=Terminal(this._config),this._term.open(this.node),this._term.on("data",function(t){i._ws.send(JSON.stringify(["stdin",t]))}),this._ws.onmessage=function(t){var e=JSON.parse(t.data);switch(e[0]){case"stdout":i._term.write(e[1]);break;case"disconnect":i._term.write("\r\n\r\n[Finished... Term Session]\r\n")}},this._dummy_term=document.createElement("div"),this._dummy_term.style.visibility="hidden";var s=document.createElement("pre"),n=document.createElement("span");s.appendChild(n),s.innerHTML="<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>",n.innerHTML="01234567890123456789012345678901234567890123456789012345678901234567890123456789",this._dummy_term.appendChild(s),this._term.element.appendChild(this._dummy_term)}return __extends(e,t),e.prototype.dispose=function(){this._term.destroy(),this._ws=null,this._term=null,t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"config",{get:function(){return this._config},set:function(t){t.rows&&(this._term.rows=t.rows),t.cols&&(this._term.cols=t.cols);for(var e in t)this._term[e]=t[e];this._config=t,this._term_row_height=0,this.resize_term(this.width,this.height)},enumerable:!0,configurable:!0}),e.prototype.resize_term=function(t,e){this._term_row_height||(this._term_row_height=this._dummy_term.offsetHeight/25,this._term_col_width=this._dummy_term.offsetWidth/80);var r=Math.max(2,Math.floor(e/this._term_row_height)-1),i=Math.max(3,Math.floor(t/this._term_col_width)-1);this._term.resize(i,r)},e.prototype.onResize=function(t){this.resize_term(t.width,t.height)},e}(r);e.TermWidget=i}(e=t.terminal||(t.terminal={}))}(phosphor||(phosphor={}));